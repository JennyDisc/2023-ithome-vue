import{_ as g,a as w,r as n,o as v,c as x,b as e,d as a,w as d,n as f,e as h}from"./index-c8342854.js";import{u as V}from"./LoginStore-6196d13e.js";const k={data(){return{name:"",email:"",password:"",id:0}},methods:{isPassword(i){return/^(?=.*[a-z])(?=.*[A-Z])/.test(i)?!0:"密碼 需含大小寫英文字母"},submitOrder(){this.$refs.form.validate().then(i=>{if(i){const o=`http://localhost:3000/user?email=${this.email}&password=${this.password}`;w.get(o).then(l=>{console.log(l);const t=l.data[0];this.name=t.name,this.email=t.email,this.id=t.id;const s=V();s.updateName(t.name),s.updateEmail(t.email),s.updateId(t.id),alert("登入成功"),this.$refs.form.resetForm(),this.$router.push("/login/main")}).catch(l=>{console.log(l),alert("您尚未成為會員，請先註冊"),this.$router.push("/")})}else alert("請再次確認會員資料後提交")})}}},y={class:"container"},N={class:"row row-login"},B=e("div",{class:"col"},null,-1),D=e("div",{class:"d-none d-lg-block col-lg-4"},[e("img",{src:"https://images.unsplash.com/photo-1578474846511-04ba529f0b88?auto=format&fit=crop&q=80&w=1887&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",class:"img-fluid login-img",alt:"首頁畫面圖"})],-1),L={class:"col-3 my-lg-auto login-form"},S=e("h1",{class:"mb-4 text-center"},"華特義式餐廳",-1),U=e("p",{class:"mb-4 fs-4 text-center"},"歡迎華特會員",-1),$={class:"mb-3"},A={class:"mb-4"},C=e("button",{class:"btn btn-lg btn-info w-100 mb-4",type:"submit"}," 登入 ",-1),H={class:"text-end login-buttom"},M=e("div",{class:"col"},null,-1),q={class:"text-end login-buttom"};function z(i,o,l,t,s,m){const c=n("v-field"),u=n("error-message"),b=n("v-form"),p=n("RouterLink");return v(),x("div",y,[e("div",N,[B,D,e("div",L,[a(b,{id:"form",ref:"form",onSubmit:m.submitOrder,class:"pt-5 pt-lg-0"},{default:d(({errors:_})=>[S,U,e("div",$,[a(c,{type:"text",name:"email",placeholder:"請輸入電子郵件",class:f(["px-3 pe-4 py-2 form-control",{"is-invalid":_.email}]),rules:"required|email",modelValue:s.email,"onUpdate:modelValue":o[0]||(o[0]=r=>s.email=r)},null,8,["modelValue","class"]),a(u,{name:"email",class:"invalid-feedback"})]),e("div",A,[a(c,{type:"password",name:"密碼",placeholder:"請輸入密碼",class:f(["px-3 pe-4 py-2 form-control",{"is-invalid":_.密碼}]),rules:m.isPassword,modelValue:s.password,"onUpdate:modelValue":o[1]||(o[1]=r=>s.password=r)},null,8,["rules","modelValue","class"]),a(u,{name:"密碼",class:"invalid-feedback"})]),C]),_:1},8,["onSubmit"]),e("div",H,[a(p,{to:"/"},{default:d(()=>[h("返回註冊會員")]),_:1})])]),M,e("div",q,[a(p,{to:"/adminlogin"},{default:d(()=>[h("點此進入後台管理")]),_:1})])])])}const O=g(k,[["render",z]]);export{O as default};
